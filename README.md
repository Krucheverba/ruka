# Ruka Gallery Bot

Telegram –±–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –≥–∞–ª–µ—Ä–µ–∏ Ruka —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Google Sheets.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üìù –ó–∞–ø–∏—Å—å –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã (–ñ–∏–≤–æ–ø–∏—Å—å, –ê—Ä—Ç-—Å–≤–µ—á–∏, –ö–∞–ª–ª–∏–≥—Ä–∞—Ñ–∏—è)
- üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤ Google Sheets
- üí¨ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –ù–∞–π–¥–∏ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ –ø–æ–ª—É—á–∏ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ–∫–µ–Ω - —ç—Ç–æ —Ç–≤–æ–π `BOT_TOKEN`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

1. –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –≤ [Google Sheets](https://sheets.google.com)
2. –°–∫–æ–ø–∏—Ä—É–π ID —Ç–∞–±–ª–∏—Ü—ã –∏–∑ URL (–º–µ–∂–¥—É `/d/` –∏ `/edit`):
   ```
   https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit
   ```
3. –ü–µ—Ä–µ–π–¥–∏ –≤ [Google Cloud Console](https://console.cloud.google.com)
4. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
5. –í–∫–ª—é—á–∏ Google Sheets API
6. –°–æ–∑–¥–∞–π Service Account:
   - IAM & Admin ‚Üí Service Accounts ‚Üí Create Service Account
   - –î–∞–π –∏–º—è –∏ —Å–æ–∑–¥–∞–π
   - –°–æ–∑–¥–∞–π –∫–ª—é—á (JSON) –∏ —Å–∫–∞—á–∞–π —Ñ–∞–π–ª
7. –û—Ç–∫—Ä–æ–π —Å–∫–∞—á–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª - —ç—Ç–æ —Ç–≤–æ–π `GOOGLE_SERVICE_ACCOUNT_JSON`
8. –°–∫–æ–ø–∏—Ä—É–π email –∏–∑ JSON (`client_email`)
9. –û—Ç–∫—Ä–æ–π —Å–≤–æ—é Google —Ç–∞–±–ª–∏—Ü—É –∏ –¥–∞–π –¥–æ—Å—Ç—É–ø —ç—Ç–æ–º—É email (Share ‚Üí Add people)

### 3. –î–µ–ø–ª–æ–π –Ω–∞ Vercel

1. –£—Å—Ç–∞–Ω–æ–≤–∏ [Vercel CLI](https://vercel.com/download):
   ```bash
   npm i -g vercel
   ```

2. –ó–∞–ª–æ–≥–∏–Ω—å—Å—è:
   ```bash
   vercel login
   ```

3. –î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   vercel
   ```

4. –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:
   ```bash
   vercel env add BOT_TOKEN
   vercel env add SHEET_ID
   vercel env add GOOGLE_SERVICE_ACCOUNT_JSON
   ```
   
   –ò–ª–∏ —á–µ—Ä–µ–∑ [Vercel Dashboard](https://vercel.com/dashboard):
   - Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤—å –≤—Å–µ —Ç—Ä–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

5. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
   ```bash
   vercel --prod
   ```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—à—å URL –≤–∏–¥–∞ `https://your-project.vercel.app`

–£—Å—Ç–∞–Ω–æ–≤–∏ webhook –¥–ª—è –±–æ—Ç–∞:
```bash
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/setWebhook?url=https://your-project.vercel.app/api/webhook"
```

–ó–∞–º–µ–Ω–∏ `<BOT_TOKEN>` –Ω–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω –∏ `your-project.vercel.app` –Ω–∞ —Å–≤–æ–π URL.

## –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å `/start`
3. –í—ã–±–µ—Ä–∏ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –∏ –∑–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ Google Sheets

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–ë–æ—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–ª–æ–Ω–∫–∏ A-F:
- A: –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- B: –ò–º—è
- C: –¢–µ–ª–µ—Ñ–æ–Ω
- D: –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å
- E: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- F: Username Telegram

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–æ–∑–¥–∞–π .env —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ .env.example
cp .env.example .env

# –ó–∞–ø–æ–ª–Ω–∏ .env —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π ngrok –¥–ª—è webhook
```
